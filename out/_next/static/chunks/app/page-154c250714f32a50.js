(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7785:(e,t,n)=>{Promise.resolve().then(n.bind(n,696))},696:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(1133),s=n(1321);let o="/sam_browser_test_bare_next_js/out";function l(e){let{statusMessage:t}=e;return(0,r.jsx)("p",{id:"statusParagraph",style:{whiteSpace:"pre-wrap"},children:t})}function i(){return(0,r.jsx)("button",{onClick:function(){let e="Javascript is working!";"function"==typeof untar&&(e+=" Untar is loaded!"),alert(e)},children:"Test Javascript"})}function a(){return(0,r.jsx)("button",{onClick:function(){let e=indexedDB.open("testDatabase",2);e.onupgradeneeded=function(e){e.target.result.createObjectStore("testStore"),console.log("created object store testStore")},e.onsuccess=function(e){let t=e.target.result.transaction("testStore","readwrite"),n=t.objectStore("testStore"),r=Date.now();n.put(r,"currentTime"),t.oncomplete=function(){alert("IDB currentTime set to "+r)}}},children:"Set IDB currentTime"})}function c(){let e=async function(){indexedDB.open("testDatabase",2).onsuccess=function(e){e.target.result.transaction(["testStore"],"readwrite").objectStore("testStore").get("currentTime").onsuccess=function(e){alert("IDB currentTime is "+e.target.result)}}};return(0,r.jsx)("button",{onClick:e,children:"Get IDB currentTime"})}function u(e){let t=e.filesToStore;return(0,r.jsx)("button",{onClick:function(e){let n=indexedDB.open("fileDatabase",1);n.onupgradeneeded=function(e){e.target.result.createObjectStore("allFiles"),console.log("Created allFiles object store")},n.onsuccess=function(e){let n=e.target.result.transaction("allFiles","readwrite"),r=n.objectStore("allFiles");for(let e in t)r.put(t[e].blob,t[e].name);n.oncomplete=function(){alert(t.length+" files stored in IDB")}}},children:"Store Files in IDB"})}function f(e){let t=e.filesToStore,n=e.statusMessageSetter;return(0,r.jsx)("button",{onClick:function(){console.log("Clicked for web worker. Base Prefix: "+(o.length>0?o:"empty"));let e=new Worker(o+"/worker_for_store_files_in_idb.js");e.onmessage=function(e){"status_update_from_web_worker"==e.data.type&&n(e.data.content)},e.postMessage({filesToStore:t,fileDatabaseVersion:1})},children:"Store Files in IDB With Web Worker"})}function d(e){let[t,n]=(0,s.useState)(null),[o,l]=(0,s.useState)(-1);return(0,r.jsx)("img",{onClick:function(){indexedDB.open("fileDatabase",1).onsuccess=function(e){e.target.result.transaction("allFiles","readwrite").objectStore("allFiles").getAll().onsuccess=function(e){let t=e.target.result;l((o+1)%t.length);let r=new Blob([t[o]],{type:"image/webp"});console.log({filesDotLength:t.length,indexOfCurrentImage:o,newBlob:r}),n(URL.createObjectURL(r))}}},width:100,height:100,src:t})}console.log("Base prefix: "+(o.length>0?o:"empty"));let b=function(){let[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)("Waiting for file input."),[b,g]=(0,s.useState)(null),p=function(e){let t="";return e.forEach(e=>{t+=e.name+"\n"}),t};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["Untar & IDB Test v",6]}),(0,r.jsx)("input",{type:"file",onChange:e=>{let n=e.target.files[0];if("application/x-tar"!==n.type){alert("Please select a tar file");return}t(n)}}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("button",{onClick:()=>{if(null===e){alert("Please select a file first.");return}o("Untarring...");let t=new FileReader;t.onload=function(e){untar(t.result).then(function(e){let t=[];for(let n in e){let r=new Blob([e[n].blob],{type:"image/webp"}),s={name:e[n].name,blob:r,size:e[n].size};t.push(s)}g(t),console.log(t),o(t.length+" files extracted:\n"+p(t))},function(e){console.log("error handler"),o("Error: "+t.error.message)})},t.onerror=function(e){o("Error: "+t.error.message)},t.readAsArrayBuffer(e)},children:"Untar"}),(0,r.jsx)("br",{}),(0,r.jsx)(i,{})," ",(0,r.jsx)("br",{}),(0,r.jsx)(c,{})," ",(0,r.jsx)("br",{}),(0,r.jsx)(a,{})," ",(0,r.jsx)("br",{}),(0,r.jsx)(u,{filesToStore:b})," ",(0,r.jsx)("br",{}),(0,r.jsx)(f,{filesToStore:b,statusMessageSetter:o}),(0,r.jsx)("br",{}),(0,r.jsx)(l,{statusMessage:n}),(0,r.jsx)(d,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[634,775,358],()=>t(7785)),_N_E=e.O()}]);